(()=>{"use strict";var t,e;t=function(t){1==t?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")},(e=new Image).onload=e.onerror=function(){t(2==e.height)},e.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA";let o=document.querySelector(".todolist__message"),i=document.querySelector(".todolist__add-button"),c=document.querySelector(".list"),n=[];if(localStorage.getItem("todo")){n=JSON.parse(localStorage.getItem("todo"));for(let t of n)l(t)}function l(t){let e=document.createElement("li"),o=document.createElement("input"),i=document.createElement("label");e.className=t.important?"list__item important":"list__item",o.className="checkbox",o.setAttribute("type","checkbox"),o.setAttribute("id",t.id),"checked"in t&&1==t.checked&&o.setAttribute("checked",""),i.setAttribute("for",t.id),i.textContent=t.todo,e.append(o,i),c.append(e),e.insertAdjacentHTML("afterbegin",'<button class="list__close-button"></button>')}i.addEventListener("click",(function(){if(!i.value)return;let t={id:`item_${n.length}`,todo:o.value,checked:!1,important:!1};n.push(t),l(t),localStorage.setItem("todo",JSON.stringify(n))})),c.addEventListener("change",(function(t){let e=t.target.getAttribute("id");n.forEach((function(t){t.id==e&&(t.checked=!t.checked,localStorage.setItem("todo",JSON.stringify(n)))}))})),c.addEventListener("contextmenu",(function(t){t.preventDefault();let e=t.target.getAttribute("for");n.forEach((function(o){if(o.id==e){o.important=!o.important;let e=t.target.closest("li");e&&e.classList.toggle("important")}localStorage.setItem("todo",JSON.stringify(n))}))})),c.onclick=function(t){if(t.target.classList.contains("list__close-button")){let e=t.target.closest(".list__item").querySelector("label").getAttribute("for");n.forEach((function(o,i){t.target.closest("li").remove(),o.id==e&&n.splice(i,1),localStorage.setItem("todo",JSON.stringify(n))}))}}})();